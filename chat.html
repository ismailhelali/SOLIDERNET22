<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
</head>
<body>
<div id="chat-box">
  <div id="chat-header">
    <button id="minimize-button">-</button>
    <button id="close-button">x</button>
  </div>
  <div id="chat-body">
    <div id="greeting">
      Bonjour! Le but de ce chat est de collecter les informations du client afin de permettre à notre équipe de créer un devis personnalisé.
    </div>
    <form id="chat-form">
      <label for="company-name">Nom de votre entreprise:</label><br>
      <input type="text" id="company-name"><br>
      <label for="product-list">Liste de produits et besoins:</label><br>
      <table id="product-table">
        <tr>
          <th>Nom du produit</th>
          <th>Quantité</th>
        </tr>
        <tr>
          <td>
            <input type="text" class="product-name" placeholder="Nom du produit">
          </td>
          <td>
            <input type="number" class="product-quantity" placeholder="Quantité">
          </td>
        </tr>
      </table>
      <button id="add-product-button">Ajouter un produit</button><br>
  
        <button type="submit" id="submit-button">Envoyer</button>
      </form>
    </div>
  </div>
   <style>
  #chat-box {
  position: fixed;
  bottom: 0;
  right: 0;
  width: 300px;
  height: 500px;
  background-color: white;
  border: 1px solid black;
}

#chat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: black;
  color: white;
  padding: 10px;
}

#chat-body {
  padding: 10px;
}

#minimize-button {
  width: 30px;
  height: 30px;
  font-size: 20px;
  background-color: transparent;
  border: none;
  color: white;
}

#close-button {
  width: 30px;
  height: 30px;
  font-size: 20px;
  background-color: transparent;
  border: none;
  color: white;
}

#product-table .product {
  display: flex;
  margin-bottom: 10px;
}

#product-table .product-name {
  width: 150px;
}

#product-table .product-quantity {
  width: 50px;
}

#add-product-button {
  width: 150px;
  height: 30px;
  background-color: black;
  color: white;
  border: none;
}

#submit-button {
  width: 150px;
  height: 30px;
  background-color: black;
  color: white;
  border: none;
}
      </style>
        <script>
  
const chatBox = document.getElementById('chat-box');

// Minimize chat box when minimize button is clicked
const minimizeButton = document.getElementById('minimize-button');
minimizeButton.addEventListener('click', () => {
  chatBox.style.height = '30px';
});

// Close chat box when close button is clicked
const closeButton = document.getElementById('close-button');
closeButton.addEventListener('click', () => {
  chatBox.style.display = 'none';
});

// Add new product row to table when add product button is clicked
const addProductButton = document.getElementById('add-product-button');
addProductButton.addEventListener('click', () => {
  const productTable = document.getElementById('product-table');
  const newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td>
      <input type="text" class="product-name" placeholder="Nom du produit">
    </td>
    <td>
      <input type="number" class="product-quantity" placeholder="Quantité">
    </td>
  `;
  productTable.appendChild(newRow);
});

// Build product list message when form is submitted
const chatForm = document.getElementById('chat-form');
chatForm.addEventListener('submit', (event) => {
  event.preventDefault();

  const companyName = document.getElementById('company-name').value;
  const productTable = document.getElementById('product-table');
  const products = [...productTable.querySelectorAll('.product')];
  const productListMessage = `Bonjour, nous avons besoin de ${companyName} pour:

${products.map((product) => {
    const productName = product.querySelector('.product-name').value;
    const productQuantity = product.querySelector('.product-quantity').value;
    return `- ${productQuantity}x ${productName}`;
  }).join('\n')}

Merci de nous envoyer un devis le plus rapidement possible.`;

  alert(productListMessage);
});
        // Submit form when submit button is clicked
const submitButton = document.getElementById('submit-button');
submitButton.addEventListener('click', (event) => {
  event.preventDefault();

  const companyName = document.getElementById('company-name').value;
  const productRows = document.querySelectorAll('#product-table tr:not(:first-child)');
  const products = [];

  for (const row of productRows) {
    const name = row.querySelector('.product-name').value;
    const quantity = row.querySelector('.product-quantity').value;
    products.push({ name, quantity });
  }
// Build product list
const buildProductList = () => {
const productTable = document.getElementById('product-table');
const rows = productTable.querySelectorAll('tr');
const products = [];
for (const row of rows) {
const productName = row.querySelector('.product-name').value;
const productQuantity = row.querySelector('.product-quantity').value;
products.push({ name: productName, quantity: productQuantity });
}
return products;
};

// Submit form
const chatForm = document.getElementById('chat-form');
chatForm.addEventListener('submit', (event) => {
event.preventDefault();
const companyName = document.getElementById('company-name').value;
const products = buildProductList();
console.log(companyName, products);
});

</script>
</body>
</html>
