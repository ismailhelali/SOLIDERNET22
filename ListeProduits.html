<!DOCTYPE html>
<html>
<head>
  <title>SOLIDERNET Product List</title>

<!-- include Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<!-- include Bootstrap JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
  <!-- include LIEN DYAL TMP -->
  <!-- include LIEN DYAL TMP -->
  <!-- include LIEN DYAL TMP -->
  <!-- include LIEN DYAL TMP -->
  <!-- include LIEN DYAL TMP -->

  <script src="https://unpkg.com/jspdf-invoice-template@1.4.0/dist/index.js"></script>

 
</head>
<body>

<div id="container"></div>
  <div class="container-fluid">
    <!-- search field -->
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <input type="search" class="form-control" id="search-field" placeholder="Search products">
      </div>
    </div>
    <!-- category dropdown -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">
        <select class="form-control" id="category-select">
          <option value="">All categories</option>
<option value="">All categories</option>      
<option value="Autres produits Alimentaires">Autres produits Alimentaires</option> <option value="Autres Produits Emballage">Autres Produits Emballage</option> <option value="Autres Produits pour patisseries">Autres Produits pour patisseries</option> <option value="Barquette Mousse">Barquette Mousse</option> <option value="Barquettes Aluminium">Barquettes Aluminium</option> <option value="Barquettes Sushi ">Barquettes Sushi </option> <option value="Boite Pizza">Boite Pizza</option> <option value="Boite Salad en Kraft et Plastique ">Boite Salad en Kraft et Plastique </option> <option value="Chocolat">Chocolat</option> <option value="Confiture et Miel">Confiture et Miel</option> <option value="Conserve Alimentaires">Conserve Alimentaires</option> <option value="Epice - Grain et feculent">Epice - Grain et feculent</option> <option value="Farine - semoule - blé">Farine - semoule - blé</option> <option value="La charcuterie">La charcuterie</option> <option value="Le Riz">Le Riz</option> <option value="Les AMANDES ET Noix">Les AMANDES ET Noix</option> <option value="Les Arômes">Les Arômes</option> <option value="Les Boullons">Les Boullons</option> <option value="Les Crémes pour patisserie et cuissons ">Les Crémes pour patisserie et cuissons </option> <option value="Les Fromages">Les Fromages</option> <option value="Les Goblets">Les Goblets</option> <option value="Les Huiles">Les Huiles</option> <option value="Les Jus">Les Jus</option> <option value="Les pâtes ">Les pâtes </option> <option value="Les Pot de sauce">Les Pot de sauce</option> <option value="Les sauces">Les sauces</option> <option value="Les sucres ">Les sucres </option> <option value="Oeuf">Oeuf</option> <option value="Produits Entretien">Produits Entretien</option> <option value="Puré ">Puré </option> <option value="Sels">Sels</option> <option value="Thé et infusions ">Thé et infusions </option> <option value="Topping et Sirop">Topping et Sirop</option> <option value="Vinaigres">Vinaigres</option>
          <!-- add options for categories here -->
        </select>
      </div>
    </div>
    <!-- product table -->
    <table class="table mt-3">
      <thead>
        <tr>
          <th></th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit</th>
        </tr>
      </thead>
      <tbody id="product-table">
        <!-- table rows will be added here by JavaScript -->
      </tbody>
    </table>
    <!-- PDF button -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">


        <!-- HNAYA ZDNA ON CLICK GENERATE PDF-->
        <!-- HNAYA ZDNA ON CLICK GENERATE PDF-->
        <!-- HNAYA ZDNA ON CLICK GENERATE PDF-->
        <!-- HNAYA ZDNA ON CLICK GENERATE PDF-->
        <button onclick="generatePdf()" class="btn btn-primary btn-block" id="pdf-button">Generate PDF</button>
      </div>
    </div>
  </div>
<p id="current-date">La date d'aujoud'hui :</p>

<script src="products.js"></script>

<script>
// get the client name from the user 

let clientName = localStorage.getItem('clientName');

if (!clientName) {
  clientName = prompt('Please enter your name or the name of your company:');
  localStorage.setItem('clientName', clientName);
}

// Display the client name in a stylish div
const nameDiv = document.createElement('div');
nameDiv.innerHTML = `Client Name: ${clientName}`;
nameDiv.classList.add('client-name');
document.body.appendChild(nameDiv);


function generateTableRows(products) {
  const table = document.getElementById('product-table');
  table.innerHTML = ''; // clear the table
  products.forEach(product => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>
        <input id="checkbox" class="custom-checkbox"  type="checkbox" ${product.checked ? 'checked' : ''}>
      </td>
      <td>${product.name}</td>
      <td>
        <input type="number" value="${product.quantity}">
      </td>
      <td>
        <select>
          <option value="Cart" ${product.unit === 'Cart' ? 'selected' : ''}>Cart</option>
          <option value="Unt" ${product.unit === 'Unt' ? 'selected' : ''}>Unt</option>
          <!-- add more options for units here -->
        </select>
      </td>
    `;
    const checkbox = row.querySelector('input[type="checkbox"]');
    checkbox.addEventListener('click', () => {
      product.checked = checkbox.checked;
    });

    const quantityInput = row.querySelector('input[type="number"]');
    quantityInput.addEventListener('change', () => {
      product.quantity = parseInt(quantityInput.value);
    });
    const unitSelect = row.querySelector('select');
    unitSelect.addEventListener('change', () => {
      product.unit = unitSelect.value;
    });
    table.appendChild(row);
    
  });
}

const searchField = document.getElementById('search-field');
const categorySelect = document.getElementById('category-select');

searchField.addEventListener('input', () => {
  const query = searchField.value.toLowerCase();
  const filteredProducts = products.filter(product => {
    return product.name.toLowerCase().includes(query) || product.category.toLowerCase().includes(query);
  });
  generateTableRows(filteredProducts);
});

categorySelect.addEventListener('change', () => {
  const category = categorySelect.value;
  const filteredProducts = category ? products.filter(product => product.category === category) : products;
  generateTableRows(filteredProducts);
});


window.onload = () => {
  generateTableRows(products);
};


// HNAYA ZDNA TEMPLATE
// HNAYA ZDNA TEMPLATE
// HNAYA ZDNA TEMPLATE
// HNAYA ZDNA TEMPLATE
// HNAYA ZDNA TEMPLATE

function generatePdf(){
  let p=[];
  let i = 1;
  products.forEach(product => {
    if(product.checked ==true){
        
      p.push([i++,product.name,product.category,8,product.quantity,product.unit,300]);
        
    }

  });

props.invoice.table = p;

  var pdfObject = jsPDFInvoiceTemplate.default(props); 
  console.log('Object created:',pdfObject);
}

var props = {
    outputType: jsPDFInvoiceTemplate.OutputType.Save,
    returnJsPDFDocObject: true,
    fileName: "Invoice 2021",
    orientationLandscape: false,
    compress: true,
    logo: {
        src: "https://raw.githubusercontent.com/edisonneza/jspdf-invoice-template/demo/images/logo.png",
        type: 'PNG', //optional, when src= data:uri (nodejs case)
        width: 53.33, //aspect ratio = width/height
        height: 26.66,
        margin: {
            top: 0, //negative or positive num, from the current position
            left: 0 //negative or positive num, from the current position
        }
    },
    stamp: {
        inAllPages: true, //by default = false, just in the last page
        src: "https://raw.githubusercontent.com/edisonneza/jspdf-invoice-template/demo/images/qr_code.jpg",
        type: 'JPG', //optional, when src= data:uri (nodejs case)
        width: 20, //aspect ratio = width/height
        height: 20,
        margin: {
            top: 0, //negative or positive num, from the current position
            left: 0 //negative or positive num, from the current position
        }
    },
    business: {
        name: "Solidernet",
        address: "Temara , Maroc",
        phone: "(+212) 069 11 11 111",
        email: "email@example.com",
        email_1: "info@example.al",
        website: "www.solidernet.ma",
    },
    contact: {
        label: "Invoice issued for:",
        name: "Client Name",
        address: "Albania, Tirane, Astir",
        phone: "(+212) 069 22 22 222",
        email: "client@website.al",
        otherInfo: "www.website.al",
    },
    invoice: {
        label: "Invoice #: ",
        num: 19,
        invDate: "Payment Date: 01/01/2021 18:12",
        invGenDate: "Invoice Date: 02/02/2021 10:17",
        headerBorder: false,
        tableBodyBorder: false,
        header: [
          {
            title: "#", 
            style: { 
              width: 10 
            } 
          }, 
          { 
            title: "Title",
            style: {
              width: 30
            } 
          }, 
          { 
            title: "Description",
            style: {
              width: 80
            } 
          }, 
          { title: "Price"},
          { title: "Quantité"},
          { title: "Unité"},
          { title: "Total"}
        ],
        
       table: [],
        additionalRows: [{
            col1: 'Total:',
            col2: '145,250.50',
            col3: 'ALL',
            style: {
                fontSize: 14 //optional, default 12
            }
        },
        {
            col1: 'VAT:',
            col2: '20',
            col3: '%',
            style: {
                fontSize: 10 //optional, default 12
            }
        },
        {
            col1: 'SubTotal:',
            col2: '116,199.90',
            col3: 'ALL',
            style: {
                fontSize: 10 //optional, default 12
            }
        }],
        invDescLabel: "Invoice Note",
        invDesc: "There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary.",
    },
    footer: {
        text: "The invoice is created on a computer and is valid without the signature and stamp.",
    },
    pageEnable: true,
    pageLabel: "Page ",
};

//end template
  </script>
  </body>
  </html>

<style>
/* Make the checkbox larger */
.custom-checkbox {
  width: 30px;
  height: 30px;
}

/* Make the background color visible */
.custom-checkbox:before {
  background-color: #ffffff;
}

/* Change the color on hover */
.custom-checkbox:hover:before {
  background-color: #f1f1f1;
}

/* Add a border when checked */
.custom-checkbox:checked:before {
  border: 2px solid #000000;
}
</style>



<script>
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth()+1;
  var yyyy = today.getFullYear();

  document.getElementById("current-date").innerHTML += dd+'/'+mm+'/'+yyyy;
</script>




