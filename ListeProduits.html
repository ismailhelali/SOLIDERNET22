<!DOCTYPE html>
<html>
<head>
  <title>SOLIDERNET Product List</title>
  
  <!-- include jspdf library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
<!-- include Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<!-- include Bootstrap JavaScript -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  
  <!-- include Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- include custom CSS -->
  <style>
    /* add custom styling here */
  </style>
</head>
<body>
  <div class="container-fluid">
    <!-- search field -->
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <input type="search" class="form-control" id="search-field" placeholder="Search products">
      </div>
    </div>
    <!-- category dropdown -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">
        <select class="form-control" id="category-select">
          <option value="">All categories</option>
          <!-- add options for categories here -->
        </select>
      </div>
    </div>
    <!-- product table -->
    <table class="table mt-3">
      <thead>
        <tr>
          <th></th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit</th>
        </tr>
      </thead>
      <tbody id="product-table">
        <!-- table rows will be added here by JavaScript -->
      </tbody>
    </table>
    <!-- PDF button -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">
        <button class="btn btn-primary btn-block" id="pdf-button">Generate PDF</button>
      </div>
    </div>
  </div>
  <!-- include jspdf library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
  <!-- include Bootstrap JavaScript -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.16.0/dist/umd/popper.min.js" integrity="sha384-/N/t9aO/QE+tNg8+DpTJ/Yzq3Z"></script>

   <script>
  // define array of categories and products
const categories = [
  {
    name: 'Category 1',
    products: [
      { name: 'Product 1', title: 'Title 1' },
      { name: 'Product 2', title: 'Title 2' },
      // add more products here
    ]
  },
  {
    name: 'Category 2',
    products: [
      { name: 'Product 3', title: 'Title 3' },
      { name: 'Product 4', title: 'Title 4' },
      // add more products here
    ]
  },
  // add more categories here
];

// function to create table rows for products
function createTableRows(products) {
  const rows = [];
  // loop through products and create table rows
  for (const product of products) {
    const row = `
      <tr>
      
      <td><input type="checkbox" class="product-checkbox" value="${product.id}" data-quantity="${product.quantity}"></td>
        <td>${product.name}</td>
        <td><input type="number" class="form-control product-quantity"></td>
        <td><input type="text" class="form-control product-unit"></td>
      </tr>
    `;
    rows.push(row);
  }
  return rows;
}

// function to display products
function displayProducts(products) {
  // clear product table
  document.getElementById('product-table').innerHTML = '';
  // create table rows for products
  const rows = createTableRows(products);
  // add rows to product table
  for (const row of rows) {
    document.getElementById('product-table').innerHTML += row;
  }
}

   
     
     
// function to search products
function searchProducts(event) {
  // get search field value
  const searchValue = event.target.value.toLowerCase();
  // filter products based on search value
  const filteredProducts = categories
    .map(category => category.products)
    .flat()
    .filter(product => product.name.toLowerCase().includes(searchValue));
  // display filtered products
  displayProducts(filteredProducts);
}

// function to filter products by category
function filterProducts(event) {
  // get selected category
  const selectedCategory = event.target.value;
  // filter products based on selected category
  let filteredProducts = [];
  if (selectedCategory) {
    filteredProducts = categories
      .find(category => category.name === selectedCategory)
      .products;
  } else {
    filteredProducts =categories
  .map(category => category.products)
  .flat();
  }
  // display filtered products
  displayProducts(filteredProducts);
}
// keep track of checked boxes and input values
let checkedBoxes = {};

// update checkedBoxes object when a checkbox is clicked
$('#product-table').on('click', 'input[type="checkbox"]', function() {
  let id = $(this).attr('id');
  if (this.checked) {
    checkedBoxes[id] = {
      quantity: $(`#${id}-quantity`).val(),
      unit: $(`#${id}-unit`).val()
    };
  } else {
    delete checkedBoxes[id];
  }
});

// update checkedBoxes object when quantity or unit input changes
$('#product-table').on('input', 'input[type="number"], select', function() {
  let id = $(this).attr('id').split('-')[0];
  if (id in checkedBoxes) {
    checkedBoxes[id] = {
      quantity: $(`#${id}-quantity`).val(),
      unit: $(`#${id}-unit`).val()
    };
  }
});

// generate PDF when the PDF button is clicked
$('#pdf-button').on('click', function() {
  // create a new PDF document
  let doc = new jsPDF();

  // add a title to the PDF
  doc.text('Selected Products', 10, 10);

  // add a line under the title
  doc.line(10, 12, 200, 12);

  // add the selected products to the PDF
  let y = 20;
  for (let id in checkedBoxes) {
    let product = $(`#${id}-product`).text();
    let quantity = checkedBoxes[id].quantity;
    let unit = checkedBoxes[id].unit;
    doc.text(`${product} - ${quantity} ${unit}`, 10, y);
    y += 10;
  }

  // save the PDF
  doc.save('selected-products.pdf');
});
</script>

  </body>
  </html>
