<!DOCTYPE html>
<html>
<head>
  <title>SOLIDERNET Product List</title>
  
  <!-- include jspdf library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
<!-- include Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<!-- include Bootstrap JavaScript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.16.0/dist/umd/popper.min.js" integrity="sha384-/N/t9aO/QE+tNg8+DpTJ/Yzq3Z"></script>
  
  <!-- include Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- include custom CSS -->
  <style>
    /* add custom styling here */
  </style>
</head>
<body>
  <div class="container-fluid">
    <!-- search field -->
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <input type="text" class="form-control" id="search-field" placeholder="Search products">
      </div>
    </div>
    <!-- category dropdown -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">
        <select class="form-control" id="category-select">
          <option value="">All categories</option>
          <!-- add options for categories here -->
        </select>
      </div>
    </div>
    <!-- product table -->
    <table class="table mt-3">
      <thead>
        <tr>
          <th></th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit</th>
        </tr>
      </thead>
      <tbody id="product-table">
        <!-- table rows will be added here by JavaScript -->
      </tbody>
    </table>
    <!-- PDF button -->
    <div class="row mt-3">
      <div class="col-md-6 offset-md-3">
        <button class="btn btn-primary btn-block" id="pdf-button">Generate PDF</button>
      </div>
    </div>
  </div>
  <!-- include jspdf library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
  <!-- include Bootstrap JavaScript -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.16.0/dist/umd/popper.min.js" integrity="sha384-/N/t9aO/QE+tNg8+DpTJ/Yzq3Z"></script>

   <script>
  // define array of categories and products
const categories = [
  {
    name: 'Category 1',
    products: [
      { name: 'Product 1', title: 'Title 1' },
      { name: 'Product 2', title: 'Title 2' },
      // add more products here
    ]
  },
  {
    name: 'Category 2',
    products: [
      { name: 'Product 3', title: 'Title 3' },
      { name: 'Product 4', title: 'Title 4' },
      // add more products here
    ]
  },
  // add more categories here
];

// function to create table rows for products
function createTableRows(products) {
  const rows = [];
  // loop through products and create table rows
  for (const product of products) {
    const row = `
      <tr>
      
      <td><input type="checkbox" class="product-checkbox" value="${product.id}" data-quantity="${product.quantity}" checked></td>
        <td>${product.name}</td>
        <td><input type="number" class="form-control product-quantity"></td>
        <td><input type="text" class="form-control product-unit"></td>
      </tr>
    `;
    rows.push(row);
  }
  return rows;
}

// function to display products
function displayProducts(products) {
  // clear product table
  document.getElementById('product-table').innerHTML = '';
  // create table rows for products
  const rows = createTableRows(products);
  // add rows to product table
  for (const row of rows) {
    document.getElementById('product-table').innerHTML += row;
  }
}

   
     
     
// function to search products
function searchProducts(event) {
  // get search field value
  const searchValue = event.target.value.toLowerCase();
  // filter products based on search value
  const filteredProducts = categories
    .map(category => category.products)
    .flat()
    .filter(product => product.name.toLowerCase().includes(searchValue));
  // display filtered products
  displayProducts(filteredProducts);
}

// function to filter products by category
function filterProducts(event) {
  // get selected category
  const selectedCategory = event.target.value;
  // filter products based on selected category
  let filteredProducts = [];
  if (selectedCategory) {
    filteredProducts = categories
      .find(category => category.name === selectedCategory)
      .products;
  } else {
    filteredProducts =categories
  .map(category => category.products)
  .flat();
  }
  // display filtered products
  displayProducts(filteredProducts);
}

// function to generate PDF of selected products
function generatePDF() {
  // create jspdf document
  const doc = new jsPDF();
  // create table for selected products
  let table = '<table><tr><th>Product</th><th>Quantity</th><th>Unit</th></tr>';
  // get selected products and their quantities and units
  const selectedRows = document.getElementsByClassName('product-checkbox');
  for (const row of selectedRows) {
    if (row.checked) {
      const rowCells = row.parentElement.parentElement.cells;
      const product = rowCells[1].innerHTML;
      const quantity = rowCells[2].children[0].value;
      const unit = rowCells[3].children[0].value;
      table += `<tr><td>${product}</td><td>${quantity}</td><td>${unit}</td></tr>`;
    }
  }
  table += '</table>';
  // add table to document
  doc.fromHTML(table);
  // download document
  doc.save('products.pdf');
}

// display all products when page loads
displayProducts(categories.map(category => category.products).flat());

// add event listeners
document.getElementById('search-field').addEventListener('input', searchProducts);
document.getElementById('category-select').addEventListener('change', filterProducts);
document.getElementById('pdf-button').addEventListener('click', generatePDF);
</script>
  
  <script>
    document.addEventListener('visibilitychange', (event) => {
  if (document.visibilityState === 'visible') {
    window.addEventListener('beforeunload', (event) => {
      event.preventDefault();
      event.returnValue = '';
    });
  } else {
    window.removeEventListener('beforeunload', (event) => {
      event.preventDefault();
      event.returnValue = '';
    });
  }
});
  </script>
  
  <script>
    
// Get all checkboxes on the page
const checkboxes = document.querySelectorAll('input[type="checkbox"]');

// Create an array to store the checked checkboxes
const checkedBoxes = [];

// Add a change event listener to each checkbox
checkboxes.forEach(checkbox => {
  checkbox.addEventListener('change', () => {
    // If the checkbox is checked, add it to the array
    if (checkbox.checked) {
      checkedBoxes.push(checkbox);
    } else {
      // If the checkbox is not checked, remove it from the array
      const index = checkedBoxes.indexOf(checkbox);
      if (index > -1) {
        checkedBoxes.splice(index, 1);
      }
    }
  });
});
  </script>
  </body>
  </html>
