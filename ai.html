<!DATATYPE html>
<html>
  <head>
  <title>Catalogue intelligent SOLIDERNET</title>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
#chat-container {
  background-color: white;
  padding: 20px;
  width: 50%;
  margin: 0 auto;
}

#chat-log {
  height: 400px;
  overflow-y: scroll;
  padding: 20px;
}

#chat-form {
  width: 100%;
  display: flex;
}

#chat-input {
  background-color: black;
  color: white;
  padding: 10px;
  font-family: 'Courier New', monospace;
  flex-grow: 1;
  margin-right: 10px;
}

#chat-input:focus {
  outline: none;
}
</style>
<body>


<div id="chat-container">
  <div id="chat-log"></div>
  <form id="chat-form">
    <input type="text" id="chat-input" placeholder="Type your message...">
  </form>
</div>
</body>
</html>

<script>
// Retrieve the product data
let products;
fetch('products.js')
  .then(response => response.json())
  .then(data => {
    products = data;
  });

// Reference the chat form and input field
const chatForm = document.querySelector('#chat-form');
const chatInput = document.querySelector('#chat-input');
const chatLog = document.querySelector('#chat-log');

// Handle form submission
chatForm.addEventListener('submit', event => {
  event.preventDefault();

  // Retrieve user input
  const userMessage = chatInput.value;
  
  // logic tree implementation
  let responseMessage = "I'm sorry, I didn't understand your request.";
  if (userMessage.includes('category')) {
    const category = userMessage.split(' ')[1];
    const filteredProducts = products.filter(product => product.category === category);
    if (filteredProducts.length > 0) {
      responseMessage = `Here are some products in the ${category} category: ${filteredProducts.map(product => product.name).join(', ')}`;
    } else {
      responseMessage = `There are no products in the ${category} category.`;
    }
  } else if (userMessage.includes('product')) {
    const product = userMessage.split(' ')[1];
    const selectedProduct = products.find(p => p.name.toLowerCase() === product.toLowerCase());
    if (selectedProduct) {
      responseMessage = `${selectedProduct.name} - $${selectedProduct.price} - ${selectedProduct.description}`;
    }
else if (userMessage.includes('help')) {
    responseMessage = `I can help you find products by category or specific product information. Try asking for 'products in category [category name]' or 'info about product [product name]'.`;
  }
  // Add the response message to the chat log
  const responseNode = document.createElement('div');
  responseNode.classList.add('chat-message', 'chat-message-response');
  responseNode.innerHTML = responseMessage;
  chatLog.appendChild(responseNode);

  // Clear the input field
  chatInput.value = '';

  // Scroll the chat log to the bottom
  chatLog.scrollTop = chatLog.scrollHeight;
});
</script>
