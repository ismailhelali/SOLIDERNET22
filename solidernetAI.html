<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot de produits et de cuisine</title>
    <style>
      body {
  font-family: Arial, sans-serif;
}

h1 {
  text-align: center;
  color: darkblue;
}

p {
  margin: 20px 0;
}

#chat-form {
  display: flex;
  align-items: center;
  justify-content: center;
}

#chat-input {
  width: 50%;
  height: 40px;
  font-size: 16px;
  border: 1px solid lightgrey;
  border-radius: 5px;
  padding: 0 10px;
}

button[type="submit"] {
  width: 100px;
  height: 40px;
  background-color: lightblue;
  border: none;
  border-radius: 5px;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button[type="submit"]:hover {
  background-color: steelblue;
}

#chat-output {
  margin-top: 20px;
  padding: 20px;
  background-color: lightgrey;
  border-radius: 5px;
}

#chat-output p {
  margin: 10px 0;
  font-size: 18px;
}

#product-list {
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.product-card {
  width: 30%;
  background-color: white;
  border: 1px solid lightgrey;
  border-radius: 5px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.product-card img {
  width: 100%;
height: 200px;
  object-fit: cover;
  border-radius: 5px 5px 0 0;
}

.product-card h3 {
  font-size: 18px;
  margin: 10px;
}

.product-card p {
  font-size: 14px;
  margin: 10px;
}

.product-card button {
  background-color: lightblue;
  border: none;
  border-radius: 5px;
  color: white;
  font-size: 14px;
  padding: 10px;
  cursor: pointer;
}

.product-card button:hover {
  background-color: steelblue;
}

</style>
    
  </head>
  <body>
    <h1>Chatbot de produits et de cuisine</h1>
    <p>Posez une question au chatbot sur les produits ou la cuisine:</p>

    <!-- Form to submit user input to the chatbot -->
    <form id="chat-form">
      <input type="text" id="chat-input" placeholder="Entrez votre question ici">
      <button type="submit">Envoyer</button>
    </form>
    
    <!-- Div to display the chatbot's responses -->
    <div id="chat-output"></div>
    
    <!-- Div to display a list of products -->
    <div id="product-list"></div>
    
    <!-- Load external libraries -->
    <script src="https://cdn.jsdelivr.net/npm/compromise@latest/builds/compromise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    
    <!-- Set up an array of products -->
    <script>
    const products = [
  {
    name: 'Baguette',
    cuisine: 'french',
    image: 'https://via.placeholder.com/250x200?text=Baguette'
  },
  {
    name: 'Pizza',
    cuisine: 'italian',
    image: 'https://via.placeholder.com/250x200?text=Pizza'
  },
  {
    name: 'Falafel',
    cuisine: 'arabic',
    image: 'https://via.placeholder.com/250x200?text=Falafel'
  }
];
    </script>
    
    <!-- Define a function to handle user input -->
    <script>
    import * as nlp from 'compromise';

const handleUserInput = (input) => {
  // Split the input into words
  const words = input.split(' ');
  
  // Check if any of the words are related to products or cuisine
  let productMentioned = false;
  let cuisineMentioned = false;
  for (const word of words) {
    if (word.toLowerCase() === 'product') {
      productMentioned = true;
    } else if (word.toLowerCase() === 'cuisine') {
      cuisineMentioned = true;
    }
  }
  
  // If the user mentions products, ask about their cuisine preferences
  if (productMentioned) {
    if (cuisineMentioned) {
      // If the user also mentions cuisine, display a list of relevant products
      displayProductsForCuisine(input);
    } else {
      // If the user doesn't mention cuisine, ask about it
      console.log('Quelle est votre cuisine préférée?');
      console.log('What is your preferred cuisine?');
      console.log('ما هي المطبخ المفضل لديك؟');
    }
  }
};
    </script>
    
    <!-- Define a function to display relevant products for a given cuisine -->
    <script>
    const displayProductsForCuisine = (input) => {
  // Determine the user's preferred language
  let language = 'en';
  for (const lang in languageMap) {
    if (input.toLowerCase().includes(lang)) {
      language = languageMap[lang];
      break;
    }
  }
  
  // Extract the user's preferred cuisine from the input
  const preferredCuisine = nlp(input)
    .nouns()
    .toLowerCase()
    .out('array')
    .find(noun => {
      return products.some(product => product.cuisine === noun);
    });
  
  // Display a list of relevant products
  const productList = document.getElementById('product-list');
  productList.innerHTML = '';
  for (const product of products) {
    if (product.cuisine === preferredCuisine) {
      productList.innerHTML += `
        <div class="product-card">
          <img src="${product.image}" alt="${product.name}">
          <h3>${product.name}</h3>
          <p>${product.cuisine} cuisine</p>
          <button>Ajouter au panier</button>
        </div>
      `;
    }
  }
};
    </script>
    
    <!-- Map language codes to full names -->
    <script>
    const languageMap = {
  en: 'english',
  fr: 'french',
  it: 'italian',
  ar: 'arabic'
};
    </script>
    
    <!-- Set up event listener for form submission -->
    <script>
    const chatForm = document.getElementById('chat-form');

chatForm.addEventListener('submit', (event) => {
  event.preventDefault();
  const input = document.getElementById('chat-input').value;
  handleUserInput(input);
});
    </script>
    
  </body>
</html>
