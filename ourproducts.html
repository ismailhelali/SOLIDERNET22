<!DOCTYPE html>
<html>
<head>
  <title>Product Selector</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <h1>Product Selector</h1>
    <form>
      <div class="form-group">
        <label for="search">Search:</label>
        <input type="text" class="form-control" id="search">
      </div>
      <div class="form-group">
        <label for="category">Category:</label>
        <select class="form-control" id="category">
          <option value="all">All</option>
          <option value="category1">Category 1</option>
          <option value="category2">Category 2</option>
          <!-- Add more options for additional categories -->
        </select>
      </div>
    </form>
    <h2>Categories:</h2>
    <ul class="list-group">
      <li class="list-group-item"><a href="#" class="category" data-category="all">All</a></li>
      <li class="list-group-item"><a href="#" class="category" data-category="category1">Category 1</a></li>
      <li class="list-group-item"><a href="#" class="category" data-category="category2">Category 2</a></li>
      <!-- Add more list items for additional categories -->
    </ul>
    <h2>Products:</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Select</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit</th>
        </tr>
      </thead>
      <tbody id="products">
        <tr>
          <td><input type="checkbox" class="product-select" data-product="product1"></td>
          <td>Product 1</td>
          <td><input type="number" class="form-control product-quantity" min="1" value="1"></td>
          <td><input type="text" class="form-control product-unit" value="unit"></td>
        </tr>
     
<tr>
  <td><input type="checkbox" class="product-select" data-product="product2"></td>
  <td>Product 2</td>
  <td><input type="number" class="form-control product-quantity" min="1" value="1"></td>
  <td><input type="text" class="form-control product-unit" value="unit"></td>
</tr>
<!-- Add more rows for additional products -->
      </tbody>
    </table>
    <h2>Selected Products:</h2>
    <table class="table" id="selected-products">
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Unit</th>
        </tr>
      </thead>
      <tbody>
        <!-- Selected products will be added here -->
      </tbody>
    </table>
    <button type="button" class="btn btn-primary" id="save-pdf">Save as PDF</button>
    <form>
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name">
      </div>
      <div class="form-group">
        <label for="phone">Phone:</label>
        <input type="text" class="form-control" id="phone">
      </div>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.2.0/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.15/jspdf.plugin.autotable.min.js"></script>
  <script>
  
  const products = [
  { name: "Product 1", category: "category1", quantity: 1, unit: "unit" },
  { name: "Product 2", category: "category1", quantity: 1, unit: "unit" },
  { name: "Product 3", category: "category2", quantity: 1, unit: "unit" },
  // Add more products here
];

const searchInput = document.querySelector("#search");
const categoryInput = document.querySelector("#category");
const productsList = document.querySelector("#products");
const selectedProductsTable = document.querySelector("#selected-products");
const savePDFButton = document.querySelector("#save-pdf");
const nameInput = document.querySelector("#name");
const phoneInput = document.querySelector("#phone");

let selectedProducts = [];

function renderProducts(products) {
  productsList.innerHTML = "";
  for (const product of products) {
    productsList.innerHTML += `
      <tr>
        <td><input type="checkbox" class="product-select" data-product="${product.name}"></td>
        <td>${product.name}</td>
        <td><input type="number" class="form-control product-quantity" min="1" value="${product.quantity}"></td>
        <td><input type="text" class="form-control product-unit" value="${product.unit}"></td>
      </tr>
    `;
  }
}

function renderSelectedProducts(products) {
  selectedProductsTable.innerHTML = "";
  for (const product of products) {
    selectedProductsTable.innerHTML += `
      <tr>
        <td>${product.name}</td>
        <td>${product.quantity}</td>
        <td>${product.unit}</td>
      </tr>
    `;
  }
}

function updateSelectedProducts() {
  selectedProducts = [];
  const selectedCheckboxes = Array.from(document.querySelectorAll(".product-select:checked"));
  for (const checkbox of selectedCheckboxes) {
    const productName = checkbox.getAttribute("data-product");
    const productQuantityInput = checkbox.parentElement.parentElement.querySelector(".product-quantity");
    const productQuantity = productQuantityInput.value;
    const productUnitInput = checkbox.parentElement.parentElement.querySelector(".product-unit");
    const productUnit = productUnitInput.value;
    const product = _.find(products, { name: productName });
    selectedProducts.push({ ...product, quantity: productQuantity, unit: productUnit });
  }
  renderSelectedProducts(selectedProducts);
}


function filterProducts() {
  const searchQuery = searchInput.value.toLowerCase();
  const categoryQuery = categoryInput.value;
  let filteredProducts = products;
  if (searchQuery) {
    filteredProducts = _.filter(filteredProducts, product => product.name.toLowerCase().includes(searchQuery));
  }
  if (categoryQuery) {
    filteredProducts = _.filter(filteredProducts, product => product.category === categoryQuery);
  }
  renderProducts(filteredProducts);
}

searchInput.addEventListener("input", filterProducts);
categoryInput.addEventListener("input", filterProducts);
productsList.addEventListener("change", updateSelectedProducts);

savePDFButton.addEventListener("click", () => {
  const name = nameInput.value;
  const phone = phoneInput.value;
  const doc = new jsPDF();
  doc.text(`Name: ${name}`, 10, 10);
  doc.text(`Phone: ${phone}`, 10, 20);
  doc.text("Selected Products:", 10, 30);
  for (const product of selectedProducts) {
    doc.text(`${product.name} - ${product.quantity} ${product.unit}`, 10, 40);
  }
  doc.save("selected-products.pdf");
});

renderProducts(products);
  </script>
</body>
</html>
